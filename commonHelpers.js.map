{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector('.form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\n\nlet searchParamsDefaults = {\n  key: '41631198-f5cd04d694ed896bf4215baa6',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nfunction showLoaderAndHideGallery() {\n  loaderElement.style.display = 'block';\n  galleryContainer.style.display = 'none';\n}\n\nfunction hideLoaderAndShowGallery() {\n  loaderElement.style.display = 'none';\n  galleryContainer.style.display = 'flex';\n}\n\nfunction generateGalleryHTML(hits) {\n  return hits.reduce((html, hit) => {\n    const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = hit;\n    return (\n      html +\n      `<li class=\"gallery-item\">\n        <a href=${largeImageURL}> \n          <img class=\"gallery-img\" src=${webformatURL} alt=${tags} />\n        </a>\n        <div class=\"gallery-text-box\">\n          <p>Likes: <span class=\"text-value\">${likes}</span></p>\n          <p>views: <span class=\"text-value\">${views}</span></p>\n          <p>comments: <span class=\"text-value\">${comments}</span></p>\n          <p>downloads: <span class=\"text-value\">${downloads}</span></p>\n        </div>\n      </li>`\n    );\n  }, '');\n}\n\nfunction renderGallery(hits) {\n  const galleryHTML = generateGalleryHTML(hits);\n  galleryContainer.innerHTML = galleryHTML;\n}\n\nfunction initializeImageLightbox() {\n  let lightbox = new SimpleLightbox('.gallery a', {\n    nav: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n  });\n  lightbox.refresh();\n}\n\nfunction handleNoResults() {\n  galleryContainer.style.display = 'none';\n  iziToast.error({\n    position: 'topRight',\n    color: 'red',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nfunction searchImages(params) {\n  showLoaderAndHideGallery();\n\n  setTimeout(function () {\n    fetch(`https://pixabay.com/api/?${params}`)\n      .then(response => {\n        hideLoaderAndShowGallery();\n\n        if (!response.ok) {\n          throw new Error(error.message);\n        }\n\n        return response.json();\n      })\n      .then(({ hits }) => {\n        if (hits.length > 0) {\n          renderGallery(hits);\n          initializeImageLightbox();\n        } else {\n          handleNoResults();\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }, 2000);\n}\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  searchParamsDefaults.q = event.target.elements.search.value.trim();\n  const searchParams = new URLSearchParams(searchParamsDefaults);\n  searchImages(searchParams);\n  event.currentTarget.reset();\n});"],"names":["searchForm","galleryContainer","loaderElement","searchParamsDefaults","showLoaderAndHideGallery","hideLoaderAndShowGallery","generateGalleryHTML","hits","html","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","galleryHTML","initializeImageLightbox","SimpleLightbox","handleNoResults","iziToast","searchImages","params","response","error","event","searchParams"],"mappings":"6vBAKA,MAAMA,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAgB,SAAS,cAAc,SAAS,EAEtD,IAAIC,EAAuB,CACzB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEA,SAASC,GAA2B,CAClCF,EAAc,MAAM,QAAU,QAC9BD,EAAiB,MAAM,QAAU,MACnC,CAEA,SAASI,GAA2B,CAClCH,EAAc,MAAM,QAAU,OAC9BD,EAAiB,MAAM,QAAU,MACnC,CAEA,SAASK,EAAoBC,EAAM,CACjC,OAAOA,EAAK,OAAO,CAACC,EAAMC,IAAQ,CAChC,KAAM,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,OACED,EACA;AAAA,kBACYE;AAAA,yCACuBC,SAAoBC;AAAA;AAAA;AAAA,+CAGdC;AAAA,+CACAC;AAAA,kDACGC;AAAA,mDACCC;AAAA;AAAA,YAIhD,EAAE,EAAE,CACP,CAEA,SAASC,EAAcV,EAAM,CAC3B,MAAMW,EAAcZ,EAAoBC,CAAI,EAC5CN,EAAiB,UAAYiB,CAC/B,CAEA,SAASC,GAA0B,CAClB,IAAIC,EAAe,aAAc,CAC9C,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAG,EACQ,QAAO,CAClB,CAEA,SAASC,GAAkB,CACzBpB,EAAiB,MAAM,QAAU,OACjCqB,EAAS,MAAM,CACb,SAAU,WACV,MAAO,MACP,QAAS,0EACb,CAAG,CACH,CAEA,SAASC,EAAaC,EAAQ,CAC5BpB,IAEA,WAAW,UAAY,CACrB,MAAM,4BAA4BoB,GAAQ,EACvC,KAAKC,GAAY,CAGhB,GAFApB,IAEI,CAACoB,EAAS,GACZ,MAAM,IAAI,MAAM,MAAM,OAAO,EAG/B,OAAOA,EAAS,MACxB,CAAO,EACA,KAAK,CAAC,CAAE,KAAAlB,KAAW,CACdA,EAAK,OAAS,GAChBU,EAAcV,CAAI,EAClBY,KAEAE,GAEV,CAAO,EACA,MAAMK,GAAS,CACd,QAAQ,IAAIA,CAAK,CACzB,CAAO,CACJ,EAAE,GAAI,CACT,CAEA1B,EAAW,iBAAiB,SAAU2B,GAAS,CAC7CA,EAAM,eAAc,EACpBxB,EAAqB,EAAIwB,EAAM,OAAO,SAAS,OAAO,MAAM,OAC5D,MAAMC,EAAe,IAAI,gBAAgBzB,CAAoB,EAC7DoB,EAAaK,CAAY,EACzBD,EAAM,cAAc,OACtB,CAAC"}